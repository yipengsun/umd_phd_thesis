\chapter{Analysis overview}
\label{ref:overview}

This analysis aims at an extraction of \RD and \RDst from
LHCb 2016 data\footnote{
    It is planned to use full LHCb run 2 data (2016--2018) at a later date.
}, reconstructed in $\Dstarp\mun$ and $\Dz\mun$ final states
(often referred in this text as \Dstar channel and \Dz channel in later
chapters).
These states are chosen so that the final state particles
(e.g. $K^-, \pi^+, \mu^-$) are all charged, because the LHCb detector is not
well-suited for neutral particle reconstruction.
A complication of these states is that they are \emph{inhomogeneous},
that is, not all \Dz\mun final state events are actually in \Dz\mun final
states:
\Dstarp\mun states feed down into the \Dz\mun states,
because \Dstarp decays strongly to a \Dz and a slow \pip,
with the latter often missed in the reconstruction;
for example, a slow \pip with a softer momentum may fail to register a
well-defined track in the detector, thus no \Dstarp is constructed for this
event.
In addition, \Dstarz\mun states,
which has a branching fraction of about 2.5 times larger compared to \Dz\mun
states\footnote{
    More precisely, the relevant branching fractions are:
    $\Bm \rightarrow \Dstarz \ell^- \neulb$ and
    $\Bm \rightarrow \Dz \ell^- \neulb$.
    % 5.58 vs 2.30, from PDG live
},
are contributing exclusively to \Dz\mun states, because the neutral slow
\piz, a product of \Dstarz decay, is entirely missed.
Therefore, a \emph{simultaneous} fit,
assuming isospin symmetry,
to both \Dstarp\mun and \Dz\mun states is needed to
account for the correlations\footnote{
    The uncertainties on the predicted values of \RD and \RDst based on SM are,
    however, considered to be uncorrelated.
    % FIXME: Add ref and a bit more explanation.
} between \RD and \RDst and improve precision\footnote{
    As opposed to extract \RDst from \Dstarp\mun sample alone.
} for \RDst.

Both \Dstarp\mun and \Dz\mun final states contain contributions from many decay
modes.
Each decay mode has differing kinematics
which are often modelled from Monte-Carlo simulation (MC),
sometimes from data control samples.
These differences are used in the fit to determine the yields of all
relevant decay modes.
The differentiating kinematic variables, defined in the \B rest frame,
referred as ``fit variables'',
are the following:
%%%%
\begin{itemize}
    \item \mmSq: Defined as $(p_B - p_{D^{(*)}} - p_\mu)^2$,
        the missing mass (squared) is typically due to missing (unreconstructed)
        neutrino(s).
        For $B \rightarrow D \mun \neumb$ decays, only 1 neutrino is missing,
        so \mmSq is small ($\sim$ the mass of neutrino);
        for $B \rightarrow D \taum (\rightarrow \mun\neumb\neut) \neutb$,
        3 neutrinos are missing, so \mmSq can be large.
    \item \el: The energy of \mun. \mun coming from \taum decays are typically
        softer, i.e. with smaller energy, due to reduced available phase space.
    \item \qSq: The momentum transfer, defined as the invariant mass squared
        of the virtual $W$ boson.
        The \qSq spectrum are notably different between
        $B \rightarrow \text{P} \ell\neu$ and $B \rightarrow \text{V} \ell\neu$
        decays, where ``P'' stands for a pseudoscalar meson (e.g. \Dz),
        and ``V'' a vector (e.g. \Dstar);
        the \qSq spectrum is softer
        (more likely to be at lower \qSq) for pseudoscalar mesons.
        This will be discussed in more detail in \cref{ref:theory}.
        In addition, the semitauonic decays are restricted to the phase space
        where $\qSq > m^2_\tau$,
        whereas the semimuonic decays extend down to $\qSq > m^2_\mu \approx 0$.
        Both modes share a common \qSq upper bound $(m_B - m_{D^{(*)}})^2$
        where the $D$ meson is produced at rest in the $B$ rest frame.
\end{itemize}
%%%%
These variables, however, cannot be deduced exactly at LHCb,
because \B mesons
are typically produced from hadronization of $pp$ collisions,
carrying an unknown portion of $pp$ momenta,
so the \B rest frame is not known.
A technology, termed ``rest frame approximation'' (RFA), is developed for LHCb
to estimate the \B rest frame, making computation of fit variables possible.
% As an demonstration that RFA can reproduce these variables reasonably well,
% MC true rest frame variables and estimated variables with RFA for
% $\Bm \rightarrow \Dz\mun\neumb$ decay are shown in
% \cref{fig:rfa-variables}.
More information about RFA can be found in \cref{appx:rfa}.

% \begin{figure}[!htb]
%     \caption{
%         MC true rest frame variables vs. estimated variables with RFA in
%         $\Bm \rightarrow \Dz\mun\neumb$ decay.
%     }
%     \label{fig:rfa-variables}
% \end{figure}

As an update to LHCb \RDX run 1 analysis, this analysis shares a similar
workflow with that of run 1.
The workflow of this analysis is:
First, \Dstarp\mun and \Dz\mun final states are selected with procedure
described in \cref{ref:sel}.
Then, emulation of certain detector responses to MC are carried out offline:
This analysis requires a large number of MC events to control statistical
uncertainty, making \emph{simulating} every detector response impractical.
Both the reason (with more details) and the emulation procedure are discussed in
\cref{ref:mc-emulation}.
After, various mis-modellings in MC simulation,
mainly in form factor modelling and detector responses, are updated and
corrected with the procedures detailed in \cref{ref:mc-cor}.
Finally, \RDX are extracted from a simultaneous fit, with fit procedure and
results listed in \cref{ref:fit}
and selected systematic uncertainties discussed in
\cref{ref:sys-uncert}.
% Many technologies developed for run 1 are carried over to this analysis.
% The main additional difficulties this analysis has to face are the emulation
% on MC (already listed above) and a wide variety of software usage, including
% different versions of the same software.
% The latter is summarized as a side in \cref{ref:reprod-analysis}.

Additional information is organized as follows:
An overview of theory of semileptonic \B decay is provided in
\cref{ref:theory},
followed by a brief introduction to the LHCb detector in \cref{ref:detector}.
The ``conclusion'' of this still ongoing analysis is provided in
\cref{ref:conclusion}.
